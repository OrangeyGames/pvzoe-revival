<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PvZ Mini-program Archive</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: linear-gradient(180deg, #0b6fdc 0%, #004080 55%, #001428 100%);
    color: white;
    margin: 0;
}

header {
    background: linear-gradient(to right, #004080, #001f40);
    padding: 15px 0;
    box-shadow: 0 4px 8px rgba(0,0,0,.3);
}

header h1 {
    font-size: 2.5em;
    color: #ffcc00;
    margin: 0;
}

.section-title {
    font-size: 2em;
    margin: 40px 0 10px;
    color: #ffcc00;
}

.container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 1200px;
    margin: auto;
}

.card {
    background: linear-gradient(to bottom, #00284d, #001730);
    border-radius: 10px;
    margin: 15px;
    padding: 20px;
    width: 250px;
    box-shadow: 0 8px 16px rgba(0,0,0,.3);
}

.card h3 { color: #ffcc00; }
.card p { color: #ccc; }

.card button {
    background: linear-gradient(to bottom, #28a745, #19692c);
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    color: white;
    cursor: pointer;
}

.top-btn {
    margin: 10px;
    background: linear-gradient(to bottom, #ffc400, #c69a00);
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
}

#fullscreen {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.85);
    z-index: 9999;
}

#now-playing {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    background: #d7e6ff;
    padding: 6px 12px;
    border-radius: 6px;
    color: #00245c;
    font-weight: bold;
}

.ctrl-btn {
    position: absolute;
    top: 20px;
    border: none;
    border-radius: 6px;
    padding: 10px;
    cursor: pointer;
    font-size: 1.2em;
}

#fsBtn { left: 20px; background: #4da3ff; }
#rotateBtn { left: 80px; background: #ff9800; }
#downloadBtn { left: 140px; background: #34d058; }
#tabBtn { left: 200px; background: #9c27b0; color: white; }
#closeBtn { right: 20px; background: red; color: white; }


#game-frame {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 80%;
    height: 80%;
    transform: translate(-50%, -50%);
    border: none;
}

.portrait {
  width: 50vh !important;
  height: 50vw !important;
  transform: translate(-50%, -50%) rotate(90deg);
}

#game-frame {
  transform-origin: center center;
}

#contributorsPanel {
    position: fixed;
    top: 0;
    right: -400px;
    width: 350px;
    height: 100vh;
    background: linear-gradient(to bottom, #00284d, #001730);
    border-left: 2px solid #ffcc00;
    transition: right .4s ease;
    z-index: 10000;
    display: flex;
    flex-direction: column;
}
#contributorsPanel.active { right: 0; }

#contributorsPanel h2 {
    color: #ffcc00;
    padding: 20px;
    margin: 0;
}

.contributors-iframe { flex: 1; border: none; }

.overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.55);
    display: none;
    z-index: 9000;
}
.overlay.active { display: block; }

footer { margin: 40px 0; }
</style>
</head>

<body>

<header>
  <h1 data-i18n="title"></h1>
</header>

<button class="top-btn" onclick="setLang('en')">EN</button>
<button class="top-btn" onclick="setLang('zh')">中文</button>
<button class="top-btn" id="contributorsBtn" data-i18n="contributors"></button>

<div class="section-title" data-i18n="games"></div>
<div class="container">
  <div class="card"><h3 data-i18n="too_title"></h3><p data-i18n="too_desc"></p><button data-i18n="play" onclick="openGame('too','./too/index.html')"></button></div>
  <div class="card"><h3 data-i18n="pez_title"></h3><p data-i18n="pez_desc"></p><button data-i18n="play" onclick="openGame('pez','./pez/index.html')"></button></div>
  <div class="card"><h3 data-i18n="ph_title"></h3><p data-i18n="ph_desc"></p><button data-i18n="play" onclick="openGame('ph','./ph/index.html')"></button></div>
  <div class="card"><h3 data-i18n="oe_title"></h3><p data-i18n="oe_desc"></p><button data-i18n="play" onclick="openGame('oe','./oe/index.html')"></button></div>
  <div class="card"><h3 data-i18n="weirdoe_title"></h3><p data-i18n="weirdoe_desc"></p><button data-i18n="play" onclick="openGame('weirdoe','./weirdoe/index.html')"></button></div>
  <div class="card"><h3 data-i18n="evolve_title"></h3><p data-i18n="evolve_desc"></p><button data-i18n="play" onclick="openGame('evolve','./evolve/index.html')"></button></div>
</div>

<div class="section-title" data-i18n="mods"></div>
<div class="container">
  <div class="card"><h3 data-i18n="chuck_title"></h3><p data-i18n="chuck_desc"></p><button data-i18n="play" onclick="openGame('chuckoe','./chuckoe/index.html')"></button></div>
</div>

<div class="section-title" style="color:red" data-i18n="danger"></div>
<div class="container">
  <div class="card"><h3 data-i18n="beta_title"></h3><p data-i18n="beta_desc"></p><button data-i18n="play" onclick="openGame('betaoe','./betaoe/index.html')"></button></div>
  <div class="card"><h3 data-i18n="alpha_title"></h3><p data-i18n="alpha_desc"></p><button data-i18n="play" onclick="openGame('alphaoe','./alphaoe/index.html')"></button></div>
  <div class="card"><h3 data-i18n="early_title"></h3><p data-i18n="early_desc"></p><button data-i18n="play" onclick="openGame('earlyoe','./earlyoe/index.html')"></button></div>
  <div class="card"><h3 data-i18n="v37_title"></h3><p data-i18n="v37_desc"></p><button data-i18n="play" onclick="openGame('v37','./v37/index.html')"></button></div>
  <div class="card"><h3 data-i18n="heroes_title"></h3><p data-i18n="heroes_desc"></p><button data-i18n="play" onclick="openGame('heroes','./heroes/index.html')"></button></div>
  <div class="card"><h3 data-i18n="pvz3d_title"></h3><p data-i18n="pvz3d_desc"></p><button data-i18n="play" onclick="openGame('pvz3d','./pvz3d/index.html')"></button></div>
  <div class="card"><h3 data-i18n="wtf_title"></h3><p data-i18n="wtf_desc"></p><button data-i18n="play" onclick="openGame('wtf','./wtf/index.html')"></button></div>
</div>

<div id="contributorsPanel">
  <h2 data-i18n="contributors"></h2>
  <iframe class="contributors-iframe" src="./credits/index.html"></iframe>
</div>
<div class="overlay" id="overlay"></div>

<div id="fullscreen">
  <div id="now-playing"></div>
  <button id="fsBtn" class="ctrl-btn" onclick="toggleFullscreen()">⛶</button>
  <button id="rotateBtn" class="ctrl-btn" onclick="toggleOrientation()">⟳</button>
  <button id="tabBtn" class="ctrl-btn" onclick="openNewTab()">↗</button>
  <button id="closeBtn" class="ctrl-btn" onclick="closeGame()">X</button>
  <button id="downloadBtn" class="ctrl-btn" onclick="downloadCurrent()">⬇</button>
  <iframe id="game-frame"></iframe>
</div>


<script>
const TEXT = {
  en: {
    title: "Berry PVZ's PvZ Mini-program Archival Page!",
    contributors: "Contributors",
    games: "GAMES",
    mods: "MODS",
    danger: "⚠️ DANGER ZONE ⚠️ These builds were archived from cache and may be incomplete.",
    play: "Play",
    now: "Now Playing:",
    too_title: "Tower of Overwatch", too_desc: "Kinda a rebrand??",
    pez_title: "Plant Eliminate Zombie", pez_desc: "PvZ OE rebrand 1...",
    ph_title: "Plant Hybrid", ph_desc: "Hybrid Edition content!",
    oe_title: "PvZOE", oe_desc: "The original OE!!!!!!",
    weirdoe_title: "WEIRD amalgated OE", weirdoe_desc: "Weirdest OE variation...",
    evolve_title: "PvZ2 Evolve", evolve_desc: "Crappy game, base of OE.",
    chuck_title: "CALM CHUCK OE", chuck_desc: "First public OE mod!",
    beta_title: "BETA OE", beta_desc: "Beta version of OE!",
    alpha_title: "ALPHA OE", alpha_desc: "Alpha version of OE!",
    early_title: "EARLY OE", early_desc: "Earlier version of OE!",
    v37_title: "v37 OE", v37_desc: "EE-style level picker build.",
    heroes_title: "PVZ2 HEROES", heroes_desc: "Not to be confused with PvZ Heroes, but is a crappy game.",
    pvz3d_title: "PvZ3D", pvz3d_desc: "Not to be confused with PvZ 3, but is a crappy game.",
    wtf_title: "???", wtf_desc: "WTF"
  },
  zh: {
    title: "Berry PVZ 的 PvZ 小程序存档页面！",
    contributors: "贡献者",
    games: "游戏",
    mods: "模组",
    danger: "⚠️ 危险区域 ⚠️ 这些版本通过缓存存档，可能不完整。",
    play: "游玩",
    now: "正在游玩：",
    too_title: "守望塔", too_desc: "算是一次改名？",
    pez_title: "植物消灭僵尸", pez_desc: "PvZ OE 的第一次改版……",
    ph_title: "植物混合版", ph_desc: "混合版内容！",
    oe_title: "PvZOE", oe_desc: "最原始的 OE！！！",
    weirdoe_title: "奇怪的混合 OE", weirdoe_desc: "最诡异的 OE 变体……",
    evolve_title: "PvZ2 Evolve", evolve_desc: "很烂的游戏，也是 OE 的基础。",
    chuck_title: "CALM CHUCK OE", chuck_desc: "第一个公开的 OE 模组！",
    beta_title: "OE 测试版", beta_desc: "Beta 版本！",
    alpha_title: "OE Alpha 版", alpha_desc: "早期 Alpha。",
    early_title: "早期 OE", early_desc: "更早期版本。",
    v37_title: "v37 OE", v37_desc: "EE 风格选关。",
    heroes_title: "PVZ2 HEROES", heroes_desc: "不是 PvZ Heroes。",
    pvz3d_title: "PvZ3D", pvz3d_desc: "不要把它和《植物大战僵尸3》混淆，这是一款糟糕的游戏。",
    wtf_title: "WTF", wtf_desc: "WTF"
  }
};
const GAME_ZIPS = {
  too: "./too.zip",
  pez: "./pez.zip",
  ph: "./ph.zip",
  oe: "./oe.zip",
  weirdoe: "./weirdoe.zip",
  evolve: "./evolve.zip",
  chuckoe: "./chuckoe.zip",
  betaoe: "./betaoe.zip",
  alphaoe: "./alphaoe.zip",
  earlyoe: "./earlyoe.zip",
  v37: "./v37.zip",
  heroes: "./heroes.zip",
  pvz3d: "./pvz3d.zip",
  wtf: "./wtf.zip"
};

const frame = document.getElementById("game-frame");
const fs = document.getElementById("fullscreen");
const now = document.getElementById("now-playing");
const contributorsBtn = document.getElementById("contributorsBtn");
const contributorsPanel = document.getElementById("contributorsPanel");
const overlay = document.getElementById("overlay");

let currentURL = "";
let lang = "en";
let portrait = false;

function setLang(l) {
  lang = l;
  document.querySelectorAll("[data-i18n]").forEach(el => {
    el.textContent = TEXT[l][el.dataset.i18n];
  });
}

function openGame(key, url) {
  currentURL = url;
  frame.src = url;
  now.textContent = TEXT[lang].now + " " + key.toUpperCase();
  fs.style.display = "block";
}

function closeGame() {
  frame.src = "";
  fs.style.display = "none";
}

function toggleFullscreen() {
  if (!document.fullscreenElement) frame.requestFullscreen();
  else document.exitFullscreen();
}

function toggleOrientation() {
  portrait = !portrait;
  frame.classList.toggle("portrait", portrait);
}

function openNewTab() {
  if (currentURL) window.open(currentURL, "_blank");
}

contributorsBtn.onclick = () => {
  contributorsPanel.classList.add("active");
  overlay.classList.add("active");
};

overlay.onclick = () => {
  contributorsPanel.classList.remove("active");
  overlay.classList.remove("active");
};
function downloadCurrent() {
  if (!currentURL) return;

  const key = Object.keys(GAME_ZIPS).find(k =>
    currentURL.includes("/" + k + "/")
  );

  if (key && GAME_ZIPS[key]) {
    window.open(GAME_ZIPS[key], "_blank");
  }
}
setLang("en");
</script>

</body>
</html>
